
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Official Python Package for Algorithmic Trading APIs powered by AlgoBulls" name="description"/>
<link href="https://pyalgotrading.readthedocs.io/en/latest/package_utils/" rel="canonical"/>
<meta content="Pushpak Dagade (pushpak@algobulls.com)" name="author"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.3.3" name="generator"/>
<title>utils - pyalgotrading</title>
<link href="../assets/stylesheets/main.fe0cca5b.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.a46bcfb3.min.css" rel="stylesheet"/>
<meta content="#2196f3" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-147658856-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#pyalgotrading.utils">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="pyalgotrading" class="md-header-nav__button md-logo" href="https://pyalgotrading.readthedocs.io/en/latest/" title="pyalgotrading">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            pyalgotrading
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              utils
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/algobulls/pyalgotrading/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="pyalgotrading" class="md-nav__button md-logo" href="https://pyalgotrading.readthedocs.io/en/latest/" title="pyalgotrading">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    pyalgotrading
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/algobulls/pyalgotrading/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="Home">
      Home
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Tutorial
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Tutorial" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Tutorial
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../introduction/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../prerequisites/" title="Prerequisites">
      Prerequisites
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../structure/" title="Basic Structure">
      Basic Structure
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../programexample/" title="Program Example">
      Program Example
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../upload/" title="Upload your Strategy">
      Upload your Strategy
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../testing/" title="Testing">
      Testing
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      API
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        API
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../package_algobulls/" title="algobulls">
      algobulls
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_broker/" title="broker">
      broker
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_instrument/" title="instrument">
      instrument
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_order/" title="order">
      order
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_strategy/" title="strategy">
      strategy
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        utils
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="utils">
      utils
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils">
    pyalgotrading.utils
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks">
    candlesticks
  </a>
<nav aria-label="candlesticks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.heikinashi">
    heikinashi
  </a>
<nav aria-label="heikinashi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.heikinashi.HeikinAshi">
    HeikinAshi()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.linebreak">
    linebreak
  </a>
<nav aria-label="linebreak" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.linebreak.Linebreak">
    Linebreak()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.renko">
    renko
  </a>
<nav aria-label="renko" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.renko.Renko">
    Renko()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func">
    func
  </a>
<nav aria-label="func" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func.import_with_install">
    import_with_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func.plot_candlestick_chart">
    plot_candlestick_chart()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../module_constants/" title="constants">
      constants
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils">
    pyalgotrading.utils
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks">
    candlesticks
  </a>
<nav aria-label="candlesticks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.heikinashi">
    heikinashi
  </a>
<nav aria-label="heikinashi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.heikinashi.HeikinAshi">
    HeikinAshi()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.linebreak">
    linebreak
  </a>
<nav aria-label="linebreak" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.linebreak.Linebreak">
    Linebreak()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.renko">
    renko
  </a>
<nav aria-label="renko" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.candlesticks.renko.Renko">
    Renko()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func">
    func
  </a>
<nav aria-label="func" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func.import_with_install">
    import_with_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pyalgotrading.utils.func.plot_candlestick_chart">
    plot_candlestick_chart()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/algobulls/pyalgotrading/edit/master/docs/package_utils.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1>utils</h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#pyalgotrading.utils" id="pyalgotrading.utils" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#pyalgotrading.utils" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="pyalgotrading.utils.candlesticks">
<code>candlesticks</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Handy functions for computing various candlesticks patterns from OHLC data</p>
<div class="doc doc-children">
<div class="doc doc-object doc-module">
<h3 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.heikinashi">
<code>heikinashi</code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.heikinashi" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h4 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.heikinashi.HeikinAshi">
<code class="highlight language-python">
HeikinAshi<span class="p">(</span><span class="n">japanese_data</span><span class="p">,</span> <span class="n">ohlc</span><span class="o">=</span><span class="p">(</span><span class="s1">'timestamp'</span><span class="p">,</span> <span class="s1">'open'</span><span class="p">,</span> <span class="s1">'high'</span><span class="p">,</span> <span class="s1">'low'</span><span class="p">,</span> <span class="s1">'close'</span><span class="p">))</span> </code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.heikinashi.HeikinAshi" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Computes HeikinAshi Candlesticks Pattern data from Japanese candlesticks pattern data.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>japanese_data</code></td>
<td><code>DataFrame</code></td>
<td>
<p>Pandas DataFrame holding Japanese Candlesticks Pattern Data</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>ohlc</code></td>
<td><code>tuple</code></td>
<td>
<p>Column names corresponding to 'timestamp', 'open', 'high', 'low' and 'close' data respectively</p>
</td>
<td><code>('timestamp', 'open', 'high', 'low', 'close')</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>HeikinAshi Candlesticks Pattern data</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>pyalgotrading/utils/candlesticks/heikinashi.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">HeikinAshi</span><span class="p">(</span><span class="n">japanese_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ohlc</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'timestamp'</span><span class="p">,</span> <span class="s1">'open'</span><span class="p">,</span> <span class="s1">'high'</span><span class="p">,</span> <span class="s1">'low'</span><span class="p">,</span> <span class="s1">'close'</span><span class="p">)):</span>
    <span class="sd">"""</span>
<span class="sd">    Computes HeikinAshi Candlesticks Pattern data from Japanese candlesticks pattern data.</span>

<span class="sd">    Args:</span>
<span class="sd">        japanese_data: Pandas DataFrame holding Japanese Candlesticks Pattern Data</span>
<span class="sd">        ohlc: Column names corresponding to 'timestamp', 'open', 'high', 'low' and 'close' data respectively</span>

<span class="sd">    Returns:</span>
<span class="sd">        HeikinAshi Candlesticks Pattern data</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">ohlc</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Argument 'ohlc' should be a tuple of 5 values corresponding to the column names in 'japanese_data' pandas DataFrame, for 'timestamp', 'open', 'high', 'low' and 'close' data respectively."</span><span class="p">)</span>

    <span class="n">ha_open</span> <span class="o">=</span> <span class="s1">'ha_'</span> <span class="o">+</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ha_high</span> <span class="o">=</span> <span class="s1">'ha_'</span> <span class="o">+</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">ha_low</span> <span class="o">=</span> <span class="s1">'ha_'</span> <span class="o">+</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">ha_close</span> <span class="o">=</span> <span class="s1">'ha_'</span> <span class="o">+</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="n">japanese_data</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># make sure we don't modify the original DataFrame</span>
    <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_close</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">+</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">+</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">4</span><span class="p">]])</span> <span class="o">/</span> <span class="mi">4</span>

    <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_open</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">japanese_data</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_open</span><span class="p">]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ohlc</span><span class="p">[</span><span class="mi">4</span><span class="p">]]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_open</span><span class="p">]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_open</span><span class="p">]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_close</span><span class="p">]</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_high</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[[</span><span class="n">ha_open</span><span class="p">,</span> <span class="n">ha_close</span><span class="p">,</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_low</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[[</span><span class="n">ha_open</span><span class="p">,</span> <span class="n">ha_close</span><span class="p">,</span> <span class="n">ohlc</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Create separate DataFrame with the required columns only</span>
    <span class="n">heikinashi_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">heikinashi_data</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span>
    <span class="n">heikinashi_data</span><span class="p">[</span><span class="s1">'open'</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_open</span><span class="p">]</span>
    <span class="n">heikinashi_data</span><span class="p">[</span><span class="s1">'high'</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_high</span><span class="p">]</span>
    <span class="n">heikinashi_data</span><span class="p">[</span><span class="s1">'low'</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_low</span><span class="p">]</span>
    <span class="n">heikinashi_data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">=</span> <span class="n">japanese_data</span><span class="p">[</span><span class="n">ha_close</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">heikinashi_data</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h3 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.linebreak">
<code>linebreak</code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.linebreak" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h4 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.linebreak.Linebreak">
<code class="highlight language-python">
Linebreak<span class="p">(</span><span class="n">japanese_candles</span><span class="p">)</span> </code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.linebreak.Linebreak" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>japanese_candles</code></td>
<td><code></code></td>
<td></td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>pyalgotrading/utils/candlesticks/linebreak.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">Linebreak</span><span class="p">(</span><span class="n">japanese_candles</span><span class="p">):</span>
    <span class="sd">"""</span>

<span class="sd">    Args:</span>
<span class="sd">        japanese_candles:</span>

<span class="sd">    Returns:</span>

<span class="sd">    """</span>
    <span class="n">linebreak_candles</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">'close'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="s1">'open'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]}</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">candle</span> <span class="ow">in</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()]</span>

    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">candle</span> <span class="ow">in</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">all_greater</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">_linebreakcandle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">_linebreakcandle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span> <span class="k">for</span> <span class="n">_linebreakcandle</span> <span class="ow">in</span> <span class="n">linebreak_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]])</span>
        <span class="n">all_lesser</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">_linebreakcandle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">_linebreakcandle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span> <span class="k">for</span> <span class="n">_linebreakcandle</span> <span class="ow">in</span> <span class="n">linebreak_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]])</span>

        <span class="n">prev_linebreak_candle</span> <span class="o">=</span> <span class="n">linebreak_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">all_greater</span><span class="p">:</span>
            <span class="n">new_linebreak_candle</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'open'</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">prev_linebreak_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_linebreak_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]),</span>
                                    <span class="s1">'close'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span>
                                    <span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]}</span>
            <span class="n">linebreak_candles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_linebreak_candle</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">all_lesser</span><span class="p">:</span>
            <span class="n">new_linebreak_candle</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'open'</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">prev_linebreak_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_linebreak_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]),</span>
                                    <span class="s1">'close'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span>
                                    <span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]}</span>
            <span class="n">linebreak_candles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_linebreak_candle</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">linebreak_candles</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h3 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.renko">
<code>renko</code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.renko" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h4 class="doc doc-heading" id="pyalgotrading.utils.candlesticks.renko.Renko">
<code class="highlight language-python">
Renko<span class="p">(</span><span class="n">japanese_candles</span><span class="p">,</span> <span class="n">brick_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">initial_open</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">initial_close</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#pyalgotrading.utils.candlesticks.renko.Renko" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>japanese_candles</code></td>
<td><code></code></td>
<td></td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>brick_count</code></td>
<td><code></code></td>
<td></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>initial_open</code></td>
<td><code></code></td>
<td></td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>initial_close</code></td>
<td><code></code></td>
<td></td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>pyalgotrading/utils/candlesticks/renko.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">Renko</span><span class="p">(</span><span class="n">japanese_candles</span><span class="p">,</span> <span class="n">brick_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">initial_open</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">initial_close</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>

<span class="sd">    Args:</span>
<span class="sd">        japanese_candles:</span>
<span class="sd">        brick_count:</span>
<span class="sd">        initial_open:</span>
<span class="sd">        initial_close:</span>

<span class="sd">    Returns:</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">initial_close</span><span class="p">:</span>
        <span class="n">initial_open</span> <span class="o">=</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'open'</span><span class="p">]</span>
        <span class="n">initial_close</span> <span class="o">=</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'close'</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">initial_open</span> <span class="o">=</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'open'</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">brick_count</span> <span class="o">-</span> <span class="p">((</span><span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'open'</span><span class="p">]</span> <span class="o">-</span> <span class="n">initial_open</span><span class="p">)</span> <span class="o">%</span> <span class="n">brick_count</span><span class="p">))</span>
        <span class="n">initial_close</span> <span class="o">=</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">brick_count</span> <span class="o">-</span> <span class="p">((</span><span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">-</span> <span class="n">initial_close</span><span class="p">)</span> <span class="o">%</span> <span class="n">brick_count</span><span class="p">))</span>

    <span class="n">renko_candles</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'timestamp'</span><span class="p">],</span> <span class="s1">'open'</span><span class="p">:</span> <span class="n">initial_open</span><span class="p">,</span> <span class="s1">'close'</span><span class="p">:</span> <span class="n">initial_close</span><span class="p">}]</span>
    <span class="n">prev_renko_candle</span> <span class="o">=</span> <span class="n">renko_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">candle</span> <span class="ow">in</span> <span class="n">japanese_candles</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">max_open_close</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span>
        <span class="n">min_open_close</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_open_close</span><span class="p">:</span>
            <span class="n">number_of_renko_candles</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">-</span> <span class="n">max_open_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">brick_count</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_renko_candles</span><span class="p">):</span>
                <span class="n">renko_candles</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">],</span> <span class="s1">'open'</span><span class="p">:</span> <span class="n">max_open_close</span><span class="p">,</span> <span class="s1">'close'</span><span class="p">:</span> <span class="n">max_open_close</span> <span class="o">+</span> <span class="n">brick_count</span><span class="p">})</span>
                <span class="n">prev_renko_candle</span> <span class="o">=</span> <span class="n">renko_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">max_open_close</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_open_close</span><span class="p">:</span>
            <span class="n">number_of_renko_candles</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">min_open_close</span> <span class="o">-</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span> <span class="o">/</span> <span class="n">brick_count</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_renko_candles</span><span class="p">):</span>
                <span class="n">renko_candles</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">candle</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">],</span> <span class="s1">'open'</span><span class="p">:</span> <span class="n">min_open_close</span><span class="p">,</span> <span class="s1">'close'</span><span class="p">:</span> <span class="n">min_open_close</span> <span class="o">-</span> <span class="n">brick_count</span><span class="p">})</span>
                <span class="n">prev_renko_candle</span> <span class="o">=</span> <span class="n">renko_candles</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">min_open_close</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">prev_renko_candle</span><span class="p">[</span><span class="s1">'close'</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">renko_candles</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="pyalgotrading.utils.func">
<code>func</code>
<a class="headerlink" href="#pyalgotrading.utils.func" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>A module for plotting candlesticks</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="pyalgotrading.utils.func.import_with_install">
<code class="highlight language-python">
import_with_install<span class="p">(</span><span class="n">package_import_name</span><span class="p">,</span> <span class="n">package_install_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dependancies</span><span class="o">=</span><span class="p">())</span> </code>
<a class="headerlink" href="#pyalgotrading.utils.func.import_with_install" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Helps import 'package' even if its not installed.</p>
<p>If package is installed, it will be imported and returned.
If its not installed, it will be installed using 'pip' and a re-import will be attempted, which should succeed if the package was imported correctly.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package_import_name</code></td>
<td><code></code></td>
<td>
<p>name of package to be installed using pip, str</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>package_install_name</code></td>
<td><code></code></td>
<td>
<p>name of package to be imported. Default is None, which means package can be imported with the same name as used for installation. If not, this parameter can be used to specify a different import name.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>dependancies</code></td>
<td><code></code></td>
<td>
<p>list of python packages to be installed as additional dependencies'</p>
</td>
<td><code>()</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>The imported package</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>pyalgotrading/utils/func.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">import_with_install</span><span class="p">(</span><span class="n">package_import_name</span><span class="p">,</span> <span class="n">package_install_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dependancies</span><span class="o">=</span><span class="p">()):</span>
    <span class="sd">"""</span>
<span class="sd">    Helps import 'package' even if its not installed.</span>

<span class="sd">    If package is installed, it will be imported and returned.</span>
<span class="sd">    If its not installed, it will be installed using 'pip' and a re-import will be attempted, which should succeed if the package was imported correctly.</span>

<span class="sd">    Args:</span>
<span class="sd">        package_import_name: name of package to be installed using pip, str</span>
<span class="sd">        package_install_name: name of package to be imported. Default is None, which means package can be imported with the same name as used for installation. If not, this parameter can be used to specify a different import name.</span>
<span class="sd">        dependancies: list of python packages to be installed as additional dependencies'</span>

<span class="sd">    Returns:</span>
<span class="sd">        The imported package</span>
<span class="sd">    """</span>

    <span class="n">package_install_name</span> <span class="o">=</span> <span class="n">package_install_name</span> <span class="k">if</span> <span class="n">package_install_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">package_import_name</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">package_import_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Installing package </span><span class="si">{</span><span class="n">package_import_name</span><span class="si">}</span><span class="s2"> via pip. This may take a while..."</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">subprocess</span>
        <span class="kn">import</span> <span class="nn">sys</span>
        <span class="n">cmd_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'pip'</span><span class="p">,</span> <span class="s1">'install'</span><span class="p">,</span> <span class="n">package_install_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dependancies</span><span class="p">:</span>
            <span class="n">cmd_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">dependancies</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span><span class="n">cmd_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">package_import_name</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="pyalgotrading.utils.func.plot_candlestick_chart">
<code class="highlight language-python">
plot_candlestick_chart<span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">plot_type</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">hide_missing_dates</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indicators</span><span class="o">=</span><span class="p">(),</span> <span class="n">plot_indicators_separately</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span> </code>
<a class="headerlink" href="#pyalgotrading.utils.func.plot_candlestick_chart" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Function to create charts for various candlesticks pattern data -
    - Japanese
    - Heikin-Ashi
    - Linebreak
    - Renko
    - Japanese for Quandl data</p>
<p>Support for displaying indicator data (on top of candlesticks pattern data or separately).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data</code></td>
<td><code>DataFrame</code></td>
<td>
<p>Pandas DataFrame with columns <code>timestamp</code>, <code>open</code>, 'high<code>, 'low</code>, <code>close</code></p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>PlotType</code></td>
<td>
<p>Enum of type PlotType</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>caption</code></td>
<td><code>str</code></td>
<td>
<p>Caption for the chart</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>hide_missing_dates</code></td>
<td><code>bool</code></td>
<td>
<p>If True, missing dates in the <code>data</code> (say due to no data over weekend) will be hidden and a continuous plot will be shown.
                If False, gaps would be shown for missing dates. However, the date formatting on the x-axis is better here, so prefer this when there are no date gaps.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>show</code></td>
<td><code>bool</code></td>
<td>
<p>If True, figure will be shown. Useful for displaying figures inline while using Jupyter Notebooks</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>indicators</code></td>
<td><code>tuple</code></td>
<td>
<p>Indicator data to be displayed</p>
</td>
<td><code>()</code></td>
</tr>
<tr>
<td><code>plot_indicators_separately</code></td>
<td><code>bool</code></td>
<td>
<p>If True, indicator data would be plotted in a different subplot. Use this when indicator data range coincides with the historical data range.
                        If False, it will be plotted in the same subplot as the historical data. Use this when indicator data range does not coincide with the historical data range</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>plot_height</code></td>
<td><code>int</code></td>
<td>
<p>Plot height in pixels</p>
</td>
<td><code>500</code></td>
</tr>
<tr>
<td><code>plot_width</code></td>
<td><code>int</code></td>
<td>
<p>Plot width in pixels</p>
</td>
<td><code>1000</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>pyalgotrading/utils/func.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot_candlestick_chart</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">plot_type</span><span class="p">:</span> <span class="n">PlotType</span><span class="p">,</span> <span class="n">caption</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span> <span class="n">hide_missing_dates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">indicators</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(),</span> <span class="n">plot_indicators_separately</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">plot_height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
                           <span class="n">plot_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Function to create charts for various candlesticks pattern data -</span>
<span class="sd">        - Japanese</span>
<span class="sd">        - Heikin-Ashi</span>
<span class="sd">        - Linebreak</span>
<span class="sd">        - Renko</span>
<span class="sd">        - Japanese for Quandl data</span>

<span class="sd">    Support for displaying indicator data (on top of candlesticks pattern data or separately).</span>

<span class="sd">    Args:</span>
<span class="sd">        data: Pandas DataFrame with columns `timestamp`, `open`, 'high`, 'low`, `close`</span>
<span class="sd">        plot_type: Enum of type PlotType</span>
<span class="sd">        caption: Caption for the chart</span>
<span class="sd">        hide_missing_dates: If True, missing dates in the `data` (say due to no data over weekend) will be hidden and a continuous plot will be shown.</span>
<span class="sd">                            If False, gaps would be shown for missing dates. However, the date formatting on the x-axis is better here, so prefer this when there are no date gaps.</span>
<span class="sd">        show: If True, figure will be shown. Useful for displaying figures inline while using Jupyter Notebooks</span>
<span class="sd">        indicators: Indicator data to be displayed</span>
<span class="sd">        plot_indicators_separately: If True, indicator data would be plotted in a different subplot. Use this when indicator data range coincides with the historical data range.</span>
<span class="sd">                                    If False, it will be plotted in the same subplot as the historical data. Use this when indicator data range does not coincide with the historical data range</span>
<span class="sd">        plot_height: Plot height in pixels</span>
<span class="sd">        plot_width: Plot width in pixels</span>
<span class="sd">    """</span>
    <span class="n">import_with_install</span><span class="p">(</span><span class="n">package_import_name</span><span class="o">=</span><span class="s1">'plotly'</span><span class="p">,</span> <span class="n">package_install_name</span><span class="o">=</span><span class="s1">'plotly==4.9.0'</span><span class="p">,</span> <span class="n">dependancies</span><span class="o">=</span><span class="p">[</span><span class="s1">'notebook&gt;=5.3'</span><span class="p">,</span> <span class="s1">'ipywidgets==7.5'</span><span class="p">,</span> <span class="s1">'psutil'</span><span class="p">])</span>
    <span class="c1"># Plotly requirements taken from here: https://pypi.org/project/plotly/</span>
    <span class="kn">from</span> <span class="nn">plotly.subplots</span> <span class="kn">import</span> <span class="n">make_subplots</span>
    <span class="kn">from</span> <span class="nn">plotly</span> <span class="kn">import</span> <span class="n">graph_objects</span> <span class="k">as</span> <span class="n">go</span>

    <span class="c1"># Sanity checks</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_type</span><span class="p">,</span> <span class="n">PlotType</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Error: plot_type should be an instance of </span><span class="si">{</span><span class="n">PlotType</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Plot</span>
    <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">is</span> <span class="n">PlotType</span><span class="o">.</span><span class="n">QUANDL_JAPANESE</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span>

    <span class="k">if</span> <span class="n">hide_missing_dates</span><span class="p">:</span>
        <span class="c1"># Plotly has a limitation where if the timestamp are DateTime.DateTime objects which are not continuous,</span>
        <span class="c1"># it will plot the missing dates as empty space, which makes the curve look unnatural. The below code gives</span>
        <span class="c1"># custom timestamp formatting, which will be the x-axis ticks</span>
        <span class="n">format_timestamp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">/%m %H:%M"</span><span class="p">)</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">format_timestamp</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span>

    <span class="n">candlesticks_data_subplot_row_index</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">candlesticks_data_subplot_col_index</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">indicators</span> <span class="ow">and</span> <span class="p">(</span><span class="n">plot_indicators_separately</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">):</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vertical_spacing</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">shared_xaxes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">specs</span><span class="o">=</span><span class="p">[[{</span><span class="s2">"rowspan"</span><span class="p">:</span> <span class="mi">2</span><span class="p">}],</span> <span class="p">[{}],</span> <span class="p">[{}]])</span>
        <span class="n">indicator_subplot_row_index</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">indicator_subplot_col_index</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vertical_spacing</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">shared_xaxes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">indicator_subplot_row_index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">indicator_subplot_col_index</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">PlotType</span><span class="o">.</span><span class="n">JAPANESE</span><span class="p">,</span> <span class="n">PlotType</span><span class="o">.</span><span class="n">HEIKINASHI</span><span class="p">]:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'high'</span><span class="p">],</span> <span class="n">low</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'low'</span><span class="p">],</span> <span class="n">close</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Historical Data'</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="n">candlesticks_data_subplot_row_index</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">candlesticks_data_subplot_col_index</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">PlotType</span><span class="o">.</span><span class="n">LINEBREAK</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">data</span><span class="p">[[</span><span class="s2">"open"</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">]]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">low</span><span class="o">=</span><span class="n">data</span><span class="p">[[</span><span class="s2">"open"</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">]]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">close</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Historical Data'</span><span class="p">)])</span>
    <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">PlotType</span><span class="o">.</span><span class="n">RENKO</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'open'</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">data</span><span class="p">[[</span><span class="s2">"open"</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">]]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">low</span><span class="o">=</span><span class="n">data</span><span class="p">[[</span><span class="s2">"open"</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">]]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">close</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Historical Data'</span><span class="p">)])</span>
    <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">PlotType</span><span class="o">.</span><span class="n">QUANDL_JAPANESE</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'Open'</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'High'</span><span class="p">],</span> <span class="n">low</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'Low'</span><span class="p">],</span> <span class="n">close</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">'Close'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Historical Data'</span><span class="p">)])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Error: plot_type (</span><span class="si">{</span><span class="n">plot_type</span><span class="si">}</span><span class="s1">) is not implemented yet'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
        <span class="n">indicator_name</span> <span class="o">=</span> <span class="n">indicator</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span>
        <span class="n">indicator_data</span> <span class="o">=</span> <span class="n">indicator</span><span class="p">[</span><span class="s1">'data'</span><span class="p">]</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">indicator</span><span class="p">[</span><span class="s1">'extra'</span><span class="p">]</span> <span class="k">if</span> <span class="s1">'extra'</span> <span class="ow">in</span> <span class="n">indicator</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">indicator_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">indicator_name</span><span class="p">,</span> <span class="o">**</span><span class="n">extra</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="n">indicator_subplot_row_index</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">indicator_subplot_col_index</span><span class="p">)</span>

    <span class="c1"># Plot customization</span>
    <span class="k">if</span> <span class="n">hide_missing_dates</span><span class="p">:</span>
        <span class="c1"># Plotly has a limitation where if the timestamp are DateTime.DateTime objects which are not continuous,</span>
        <span class="c1"># it will plot the missing dates as empty space, which makes the curve look unnatural. Hence, the below fix</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">'category'</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">layout_xaxis_rangeslider_visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="s1">'text'</span><span class="p">:</span> <span class="n">caption</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">'xanchor'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">,</span> <span class="s1">'yanchor'</span><span class="p">:</span> <span class="s1">'bottom'</span><span class="p">},</span> <span class="n">height</span><span class="o">=</span><span class="n">plot_height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">plot_width</span><span class="p">)</span>

    <span class="c1"># Show the plot</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<hr/>
<div class="md-source-date">
<small>
    
      Last update: <span class="timeago" datetime="1595065069000" locale="en"></span>
</small>
</div>
<h2 id="__comments">Comments</h2>
<div id="disqus_thread"></div>
<script>var disqus_config=function(){this.page.url="https://pyalgotrading.readthedocs.io/en/latest/package_utils/",this.page.identifier="package_utils/"};!function(){var e=document,i=e.createElement("script");i.src="//algobulls.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)}()</script>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../package_strategy/" rel="prev" title="strategy">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                strategy
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../module_constants/" rel="next" title="constants">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                constants
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 | All Rights Reserved | AlgoBulls Technologies Private Limited
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://linkedin.com/company/algobulls" rel="noopener" target="_blank" title="linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://facebook.com/algobullsalgotrading" rel="noopener" target="_blank" title="facebook.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://github.com/algobulls/" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
<script src="../assets/javascripts/bundle.4a5ba8d6.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.locales.min.js"></script>
<script>
            var nodes = document.querySelectorAll('.timeago');
            var locale = nodes[0].getAttribute('locale');
            timeago.render(nodes, locale);
          </script>
</body>
</html>